<%= render 'sessions/notice' %>


<p><%= link_to 'Back to List', rooms_path %></p><br>

<h2>Details of Room</h2>
<p>
  <strong>RoomNumber:</strong>
  <%= @room.roomnumber %>
</p>

<p>
  <strong>BuildingName:</strong>
  <%= @room.buildingname %>
</p>

<p>
  <strong>Capacity:</strong>
  <%= @room.capacity %>
</p>

<br>
<h2>Reservations</h2>
<ul>
<% @room.bookings.each do |booking| %>
<li>
    <% if session[:user_id] && session[:admin]%>
    <p>
      <strong>Booked By:</strong>
      <%= User.find(booking.user_id).email %>
    </p>
  <% end%>
    <p>
      <strong>Date:</strong>
      <%= booking.date %>
    </p>
    <p>
      <strong>starttime:</strong>
      <%= booking.endtime-2%>
    </p>
    <p>
      <strong>endtime:</strong>
      <%= booking.endtime%>
    </p>
    <% if session[:user_id] == booking.user_id or session[:admin] %>

    <td><%= link_to 'Release Booking',[booking.room, booking],
                    method: :delete,
                    data: { confirm: 'Are you sure?' } %></td>
    <% end %>
</li>
    <br><br>
<% end %>
</ul>

<h2>Book Room</h2>
<p>
  <%= form_for([@room, @room.bookings.build]) do |f| %>
  Date: <%= select_tag "date", options_for_select(@date) %><br><br>
  Time: <%= select_tag "time", options_for_select(@time) %><br><br>
  <%= f.submit "Book Room"%>
  <% end %>
</p>